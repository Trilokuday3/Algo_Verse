<!-- Enhanced Log Viewer Modal -->
<div id="log-viewer-modal" class="fixed inset-0 z-50 hidden items-center justify-center bg-black/60 backdrop-blur-sm">
    <div class="m3-card w-full max-w-5xl h-[85vh] flex flex-col m-4">
        <!-- Modal Header -->
        <div class="flex justify-between items-center p-6 border-b" style="border-color: var(--outline-color);">
            <div class="flex items-center space-x-4">
                <div class="w-10 h-10 rounded-full flex items-center justify-center" style="background-color: var(--primary-container-color);">
                    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="color: var(--on-primary-container-color);">
                        <path d="M4 19.5A2.5 2.5 0 0 1 6.5 17H20"></path>
                        <path d="M6.5 2H20v20H6.5A2.5 2.5 0 0 1 4 19.5v-15A2.5 2.5 0 0 1 6.5 2z"></path>
                        <line x1="10" y1="10" x2="14" y2="10"></line>
                        <line x1="10" y1="14" x2="14" y2="14"></line>
                    </svg>
                </div>
                <div>
                    <h2 id="log-viewer-title" class="m3-title-large">Strategy Logs</h2>
                    <p class="m3-body-small" style="color: var(--on-surface-variant-color);">Real-time execution monitoring</p>
                </div>
            </div>
            <button id="close-log-viewer" class="m3-text-button p-2 rounded-full hover:bg-gray-500/10 transition-all">
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <line x1="18" y1="6" x2="6" y2="18"></line>
                    <line x1="6" y1="6" x2="18" y2="18"></line>
                </svg>
            </button>
        </div>

        <!-- Toolbar -->
        <div class="flex items-center justify-between gap-3 p-4 border-b" style="border-color: var(--outline-variant-color); background-color: var(--surface-variant-color);">
            <!-- Search Box -->
            <div class="flex-1 max-w-md">
                <div class="relative">
                    <input type="text" id="log-search" placeholder="Search logs..." class="w-full pl-10 pr-4 py-2 rounded-lg m3-body-medium focus:outline-none focus:ring-2 transition-all" style="background-color: var(--surface-color); color: var(--on-surface-color); border: 1px solid var(--outline-color);">
                    <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="absolute left-3 top-1/2 transform -translate-y-1/2" style="color: var(--on-surface-variant-color);">
                        <circle cx="11" cy="11" r="8"></circle>
                        <path d="m21 21-4.35-4.35"></path>
                    </svg>
                </div>
            </div>

            <!-- Action Buttons -->
            <div class="flex items-center gap-2">
                <!-- Auto Scroll Toggle -->
                <button id="auto-scroll-toggle" class="m3-outlined-button m3-label-small px-3 py-2 rounded-lg flex items-center gap-2 transition-all" data-active="true">
                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <path d="M5 12h14"></path>
                        <path d="m12 5 7 7-7 7"></path>
                    </svg>
                    <span>Auto-scroll</span>
                </button>

                <!-- Copy Logs -->
                <button id="copy-logs-btn" class="m3-outlined-button m3-label-small px-3 py-2 rounded-lg flex items-center gap-2 transition-all">
                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect>
                        <path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path>
                    </svg>
                    <span>Copy</span>
                </button>

                <!-- Clear Logs -->
                <button id="clear-logs-btn" class="m3-outlined-button m3-label-small px-3 py-2 rounded-lg flex items-center gap-2 transition-all" style="color: var(--error-color); border-color: var(--error-color);">
                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <polyline points="3 6 5 6 21 6"></polyline>
                        <path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"></path>
                    </svg>
                    <span>Clear</span>
                </button>
            </div>
        </div>

        <!-- Log Content Area -->
        <div id="log-viewer-content" class="flex-1 p-6 font-mono text-sm overflow-y-auto" style="background-color: #1e1e1e; color: #d4d4d4;">
            <!-- Live logs will be inserted here by JavaScript -->
            <div class="text-center py-12" style="color: var(--on-surface-variant-color);">
                <svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="mx-auto mb-4 opacity-50">
                    <path d="M4 19.5A2.5 2.5 0 0 1 6.5 17H20"></path>
                    <path d="M6.5 2H20v20H6.5A2.5 2.5 0 0 1 4 19.5v-15A2.5 2.5 0 0 1 6.5 2z"></path>
                </svg>
                <p class="m3-body-large opacity-70">No logs available</p>
                <p class="m3-body-small opacity-50 mt-2">Logs will appear here when the strategy starts running</p>
            </div>
        </div>

        <!-- Footer with Stats -->
        <div class="flex items-center justify-between p-4 border-t" style="border-color: var(--outline-variant-color); background-color: var(--surface-variant-color);">
            <div class="flex items-center gap-6 m3-label-small" style="color: var(--on-surface-variant-color);">
                <div class="flex items-center gap-2">
                    <div class="w-2 h-2 rounded-full bg-green-500"></div>
                    <span id="log-count-info">0 Info</span>
                </div>
                <div class="flex items-center gap-2">
                    <div class="w-2 h-2 rounded-full bg-yellow-500"></div>
                    <span id="log-count-warning">0 Warning</span>
                </div>
                <div class="flex items-center gap-2">
                    <div class="w-2 h-2 rounded-full bg-red-500"></div>
                    <span id="log-count-error">0 Error</span>
                </div>
            </div>
            <div class="m3-label-small" style="color: var(--on-surface-variant-color);">
                <span id="total-logs">Total: 0 logs</span>
            </div>
        </div>
    </div>
</div>
